{"version":3,"sources":["styles/global.ts","services/api.ts","contexts/auths.tsx","images/map-marker.svg","images/nameLogo.svg","components/MainCard.tsx","pages/Login.tsx","images/logo.svg","pages/Landing.tsx","images/LogoHappy.svg","components/LogoHappy.js","images/Icons/camera.svg","images/Icons/camera-stop.svg","images/Icons/microphone.svg","images/Icons/microphone-stop.svg","images/Icons/hang-up.svg","utils/Sounds/ringtone.mp3","utils/mapicon.ts","pages/OrphanagesMap.tsx","components/Sidebar.tsx","pages/Orphanage.tsx","pages/CreateOrphanage.tsx","images/Image02.svg","pages/OrphanageCreated.tsx","routes.tsx","services/history.tsx","App.tsx","index.tsx"],"names":["createGlobalStyle","api","axios","create","baseURL","AuthContext","createContext","AuthProvider","children","useState","user","setUser","loading","setLoading","email","password","a","post","response","data","defaults","headers","token","window","localStorage","setItem","JSON","stringify","useEffect","storagedUser","getItem","storagedToken","Authorization","parse","loadStorageData","Provider","value","signed","signIn","signOut","clear","useAuth","useContext","MainCard","className","src","mapMarkerImg","alt","nameLogo","withRouter","history","useHistory","name","setName","setEmail","password_hash","setPasswordHash","login","setLogin","event","preventDefault","toast","success","push","error","errors","style","display","id","onSubmit","htmlFor","onChange","target","type","onClick","Landing","logoImg","to","size","color","LogoHappy","logo","happyMapIcon","Leaflet","icon","iconUrl","iconSize","iconAnchor","popupAnchor","ringtoneSound","Howl","ringtone","loop","preload","OrphanagesMap","UserVideo","PartnerVideo","incomingCall","audioControl","videoControl","yourID","setYourID","users","setUsers","stream","setStream","receivingCall","setReceivingCall","caller","setCaller","callingFriend","setCallingFriend","callerSignal","setCallerSignal","callAccepted","setCallAccepted","callRejected","setCallRejected","receiverID","setReceiverID","audioMuted","setAudioMuted","videoMuted","setVideoMuted","userVideo","useRef","partnerVideo","socket","myPeer","orphanages","setOrphanages","endCall","current","undefined","destroy","emit","location","reload","handleClickMuteAudio","getAudioTracks","enabled","handleClickMuteVideo","getVideoTracks","get","then","io","connect","on","play","from","signal","playsInline","muted","ref","autoPlay","unload","navigator","mediaDevices","getUserMedia","video","audio","srcObject","peer","Peer","initiator","trickle","err","catch","microphonestop","microphone","camerastop","camera","hangUp","hangup","placeholder","e","toLowerCase","trim","config","iceServers","urls","username","credential","userToCall","signalData","MapContainer","center","zoom","width","height","TileLayer","url","process","map","orphanage","Marker","position","latitude","longitude","Popup","closeButton","minWidth","maxWidth","Sidebar","goBack","Orphanage","params","useParams","setOrphanage","activeImageIndex","setActiveImageIndex","images","image","index","about","dragging","touchZoom","zoomControl","scrollWheelZoom","doubleClickZoom","interactive","rel","href","instructions","opening_hours","open_on_weekends","CreateOrphanage","setPosition","setAbout","setInstructions","setOpeningHours","open_on_weekend","setOpenOnWeekend","setImages","previewImages","setPreviewImages","LocationMarker","useMapEvents","click","latlng","lat","lng","FormData","append","String","forEach","console","log","maxLength","multiple","files","selectedImages","Array","selectedImagesPreview","URL","createObjectURL","OrphanageCreated","img","CustomRoute","isPrivate","rest","Routes","path","exact","component","Login","OrphanagesMaps","Orphanagecreated","createBrowserHistory","forceRefresh","App","autoClose","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.88d3ee02.chunk.js","sourcesContent":["import { createGlobalStyle } from \"styled-components\";\n\nexport default createGlobalStyle`\n\n* {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n}\n\nbody {\n  color: #FFF;\n  background: #ebf2f5;\n}\n\nbody, input, button, textarea {\n  font: 600 18px Nunito, sans-serif;\n}\n\n`;","import axios from \"axios\";\n\nconst api = axios.create({\n  //baseURL: \"http://localhost:3333\",\n  baseURL: \"https://happy-backend-2020.herokuapp.com/\",\n});\n\nexport default api;\n","import React, { createContext, useState, useEffect, useContext } from 'react';\nimport api from '../services/api';\nimport { AxiosResponse } from \"axios\";\n\ninterface User {\n  id: number;\n  name: string;\n  email: string;\n}\n\ninterface ResponseSignInUser {\n  token: string;\n  user: User;\n  /* error?: string; */\n}\n\ninterface AuthContextData {\n  signed: boolean;\n  user: User | null;\n  /* error: string | null; */\n  loading: boolean;\n  signIn(\n    email: string,\n    password: string\n  ): Promise<AxiosResponse<ResponseSignInUser>>;\n  signOut(): void;\n  }\nconst AuthContext = createContext<AuthContextData>({} as AuthContextData);\n\nexport const AuthProvider: React.FC = ({children}) => { \n  const [user, setUser] = useState<User | null>(null);\n  //const [error, setError] = useState<string | null>(null);\n  const [loading, setLoading] =useState(true);\n\n  useEffect(()=> {\n    async function loadStorageData() {\n     const storagedUser =  window.localStorage.getItem('@Happy:user');\n     const storagedToken = window.localStorage.getItem('@Happy:token');\n     \n     if ( storagedUser && storagedToken) {\n      api.defaults.headers.Authorization = `Bearer ${storagedToken}`;\n       setUser(JSON.parse(storagedUser));\n      } \n    }\n    loadStorageData();\n    setLoading(false);\n  }, []);\n\n  async function  signIn(email: string, password: string):Promise<AxiosResponse<ResponseSignInUser>>{\n    //const response = await auth.signIn(email, password);\n    \n    const response = await api.post<ResponseSignInUser>('/sessions', { email, password });\n    \n   /*  if (response.data.error) { \n      setError(JSON.stringify(response.data.error));\n    }\n */\n    if (response.data.user) { \n      setUser(response.data.user);\n      //console.log(response.data.user)\n\n      api.defaults.headers['Authorization'] = `Bearer ${response.data.token}`;\n\n      await window.localStorage.setItem('@Happy:user', JSON.stringify(response.data.user));\n      await window.localStorage.setItem('@Happy:token', (response.data.token));\n    }\n\n     return response;\n  }\n\n  function signOut(){\n    window.localStorage.clear();\n    setUser(null);\n  }\n\n   if(loading) {\n     return <h1>Carregando...</h1>\n   }\n \n  return (\n  <AuthContext.Provider value={{ signed: !!user, user, loading, signIn, signOut }} >\n    {children}\n  </AuthContext.Provider>\n  );\n};\n\nexport function useAuth(){\n  const context =useContext(AuthContext);\n  return context;\n}","export default __webpack_public_path__ + \"static/media/map-marker.1728fbcf.svg\";","export default __webpack_public_path__ + \"static/media/nameLogo.050b51a3.svg\";","import React from 'react';\n\nimport mapMarkerImg from '../images/map-marker.svg';\nimport nameLogo from '../images/nameLogo.svg';\n\nimport '../styles/components/MainCard.css';\n\nconst MainCard: React.FC = () => {\n  return (\n    <div className=\"container\">\n        <img className=\"logo01\" src={mapMarkerImg} alt=\"Happy\" />\n        <img className=\"textLogo\" src={nameLogo} alt=\"Happy01\" />\n\n        <h3>Nova Friburgo</h3>\n        <span>Rio de Janeiro</span>\n    </div>\n\n  );\n}\n\nexport default MainCard;","import React, { useState, FormEvent} from 'react';\nimport { toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport api from '../services/api';\nimport { withRouter, useHistory } from 'react-router-dom';\n//import loginFormValidator from '../services/loginFormValidator';\n//import signUpFormValidator from '../services/signUpFormValidator';\n\nimport '../styles/pages/login.css';\nimport {useAuth} from '../contexts/auths';\n\nimport MainCard from '../components/MainCard';\nimport { stringify } from 'querystring';\n\nconst Login: React.FC = () => {\n  const { signed, signIn}= useAuth();\n  const history = useHistory();\n \n  const [name, setName] = useState('');\n  const [email, setEmail] = useState('');\n  const [password_hash, setPasswordHash] = useState('');\n  const [login, setLogin] = useState(true);\n\n  function renderPageCadastro() {\n    if(!login)\n      return 'flex'\n    return 'none'\n  }\n\n  function renderPageLogin() {\n    if(login)\n      return 'flex'\n    return 'none'\n  }\n\n\n  async function handleSignUpSubmit(event: FormEvent){\n    event.preventDefault();\n    try {\n      await api.post('users',  {name, email, password_hash});\n      toast.success('Cadastro realizado com sucesso. Faça o login.');\n      history.push(\"/login\");              \n    } catch(error) {\n      if (error.response) {\n        toast.error(error.response.data.error);\n        \n        if (error.response.data.errors.name){\n          toast.error(\"O campo NOME é obrigatório\")\n        }\n        if (error.response.data.errors.email) {\n          toast.error(\"Por favor, utilize um EMAIL VÁLIDO\")\n        }\n        if (error.response.data.errors.password_hash) {\n          toast.error(\"O campo SENHA deve conter pelo menos 6 dígitos\")\n        }\n        \n      }\n    }\n  };\n  \n  async function handleLoginSubmit(event: FormEvent){\n    event.preventDefault();\n    try {\n      await signIn(email, password_hash);\n      history.push(\"/map\");\n    } catch (error) { \n      if (error.response) {\n        toast.error(error.response.data.error);\n      }     \n    }\n  };\n\n  return (\n    <>\n      <div className=\"containerLogin\" style={{display: renderPageLogin()}}>\n        <MainCard />\n        <div className=\"loginCard\" >\n          <form id=\"form1\" onSubmit={handleLoginSubmit} >\n           <h1>Fazer login</h1>\n           <label htmlFor=\"email\">Email</label>\n           <input \n             id=\"emailLogin\" \n             value={email} \n             onChange={event => setEmail(event.target.value)} \n           />\n           <label htmlFor=\"password\">Senha</label>\n           <input \n             id=\"passwordLogin\" \n             type=\"password\"\n             value={password_hash} \n             onChange={event => setPasswordHash(event.target.value)} \n           />\n            <span onClick={()=> setLogin(!login)}>Criar conta gratuita</span>\n           <button className=\"confirm-button\" type=\"submit\">Entrar</button>\n          </form>\n        </div>\n      </div>\n\n\n      <div className=\"containerCadastro\" style={{display: renderPageCadastro()}} >\n      <MainCard />\n      <div className=\"cadastroCard\" >\n        <form id=\"form2\"onSubmit={handleSignUpSubmit} >\n          <h1>Criar conta</h1>\n          <label htmlFor=\"name\">Nome</label>\n          <input \n            id=\"name\" \n            value={name} \n            onChange={event => setName(event.target.value)} \n          />\n          <label htmlFor=\"email\">Email</label>\n          <input \n            id=\"email\" \n            value={email} \n            onChange={event => setEmail(event.target.value)} \n          />\n          <label htmlFor=\"password_hash\">Senha</label>\n          <input \n            id=\"password_hash\" \n            type=\"password\"\n            value={password_hash} \n            onChange={event => setPasswordHash(event.target.value)} \n          />\n            <span onClick={()=> setLogin(!login)}>Já tenho conta</span>\n          <button className=\"create-button\" type=\"submit\">Criar conta</button>\n          </form>\n      </div>\n      </div>\n    </>\n  );\n}\n\nexport default withRouter(Login);","export default __webpack_public_path__ + \"static/media/logo.4a53147b.svg\";","import React from 'react';\nimport logoImg from '../images/logo.svg';\n\nimport { FiArrowRight } from 'react-icons/fi';\nimport { Link } from 'react-router-dom';\n\nimport {useAuth} from '../contexts/auths';\n\nimport '../styles/pages/landing.css';\n\n\nconst Landing: React.FC = () => {\n  const { signed }= useAuth();\n  return (\n    <div id=\"page-landing\">\n      <div className=\"content-wrapper\">\n        <img src={logoImg} alt=\"Happy\" />\n\n        <main>\n          <h1>Leve felicidade para o mundo</h1>\n          <p>Visite orfanatos e mude o dia de muitas crianças.</p>\n        </main>\n\n        <div className=\"location\">\n          <strong>Nova Friburgo</strong>\n          <span>Rio de Janeiro</span>\n        </div>\n        \n        { signed? <Link to=\"/map\" className=\"enter-app\">\n          <FiArrowRight size={26} color=\"rgba(0, 0, 0, 0.6)\" />\n        </Link> : <Link to=\"/login\" className=\"enter-app\">\n          <FiArrowRight size={26} color=\"rgba(0, 0, 0, 0.6)\" />\n        </Link>}\n        \n      </div>\n    </div>\n  );\n};\n\nexport default Landing;","export default __webpack_public_path__ + \"static/media/LogoHappy.4a53147b.svg\";","import React from 'react'\nimport logo from '../images/LogoHappy.svg'\nimport '../styles/components/logoHappy.css'\n\nfunction LogoHappy(){\n    return (\n        <div className=\"logo\">\n            <img className=\"logoImage\" src={logo} alt=\"Happy Logo\"/>\n        </div>\n    )\n}\n\nexport default LogoHappy","export default __webpack_public_path__ + \"static/media/camera.9de4061b.svg\";","export default __webpack_public_path__ + \"static/media/camera-stop.8a907168.svg\";","export default __webpack_public_path__ + \"static/media/microphone.033c55c6.svg\";","export default __webpack_public_path__ + \"static/media/microphone-stop.7d4394df.svg\";","export default __webpack_public_path__ + \"static/media/hang-up.141be841.svg\";","export default __webpack_public_path__ + \"static/media/ringtone.bde53c6f.mp3\";","import Leaflet from 'leaflet';\nimport mapMarkerImg from '../images/map-marker.svg';\n\nconst happyMapIcon = Leaflet.icon({\n  iconUrl: mapMarkerImg,\n\n  iconSize: [58, 68],\n  iconAnchor: [29, 68],\n  popupAnchor: [0, -60]\n})\n\nexport default happyMapIcon;","import { useEffect, useRef, useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { useAuth } from \"../contexts/auths\";\n\nimport { toast } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\n\nimport io from \"socket.io-client\";\nimport Peer from \"simple-peer\";\nimport { FiPlus, FiArrowRight } from \"react-icons/fi\";\n\nimport { Howl } from \"howler\";\n\nimport LogoHappy from \"../components/LogoHappy\";\n\nimport camera from \"../images/Icons/camera.svg\";\nimport camerastop from \"../images/Icons/camera-stop.svg\";\nimport microphone from \"../images/Icons/microphone.svg\";\nimport microphonestop from \"../images/Icons/microphone-stop.svg\";\nimport hangup from \"../images/Icons/hang-up.svg\";\nimport ringtone from \"../utils/Sounds/ringtone.mp3\";\n\nimport { MapContainer, TileLayer, Marker, Popup } from \"react-leaflet\";\n\nimport \"leaflet/dist/leaflet.css\";\n\nimport mapMarkerImg from \"../images/map-marker.svg\";\n\nimport \"../styles/pages/orphanages-map.css\";\nimport happyMapIcon from \"../utils/mapicon\";\nimport api from \"../services/api\";\n\nconst ringtoneSound = new Howl({\n  src: [ringtone],\n  loop: true,\n  preload: true,\n});\n\ninterface Orphanage {\n  id: number;\n  latitude: number;\n  longitude: number;\n  name: string;\n}\n\nfunction OrphanagesMap() {\n  const { user, signOut } = useAuth();\n\n  const [yourID, setYourID] = useState(\"\");\n  const [users, setUsers] = useState({});\n  const [stream, setStream] = useState<MediaStream>();\n  const [receivingCall, setReceivingCall] = useState(false);\n  const [caller, setCaller] = useState(\"\");\n  const [callingFriend, setCallingFriend] = useState(false);\n  const [callerSignal, setCallerSignal] = useState<any>();\n  const [callAccepted, setCallAccepted] = useState(false);\n  const [callRejected, setCallRejected] = useState(false);\n  const [receiverID, setReceiverID] = useState(\"\");\n  const [audioMuted, setAudioMuted] = useState(false);\n  const [videoMuted, setVideoMuted] = useState(false);\n\n  const userVideo = useRef<HTMLVideoElement>(null);\n  const partnerVideo = useRef<HTMLVideoElement>(null);\n  const socket = useRef<any>();\n  const myPeer = useRef<Peer.Instance>();\n\n  const [orphanages, setOrphanages] = useState<Orphanage[]>([]);\n\n  useEffect(() => {\n    api.get(\"orphanages\").then((response) => {\n      setOrphanages(response.data);\n    });\n  }, []);\n\n  useEffect(() => {\n    socket.current = io.connect(\"/\");\n\n    socket.current.on(\"yourID\", (id: string) => {\n      //console.log(`O id e ${id}`);\n      setYourID(id);\n    });\n    socket.current.on(\"allUsers\", (users: string) => {\n      setUsers(users);\n    });\n\n    socket.current.on(\"hey\", (data: any) => {\n      setReceivingCall(true);\n      ringtoneSound.play();\n      setCaller(data.from);\n      setCallerSignal(data.signal);\n    });\n  }, []);\n\n  function callPeer(id: any) {\n    if (id !== \"\" && users[id] && id !== yourID) {\n      navigator.mediaDevices\n        .getUserMedia({ video: true, audio: true })\n        .then((stream) => {\n          setStream(stream);\n          setCallingFriend(true);\n          setCaller(id);\n          if (userVideo.current) {\n            userVideo.current.srcObject = stream;\n          }\n          const peer = new Peer({\n            initiator: true,\n            trickle: false,\n            config: {\n              iceServers: [\n                {\n                  urls: \"stun:numb.viagenie.ca\",\n                  username: \"wesleyoliveirarj@hotmail.com\",\n                  credential: \"123456\",\n                },\n                {\n                  urls: \"turn:numb.viagenie.ca\",\n                  username: \"wesleyoliveirarj@hotmail.com\",\n                  credential: \"123456\",\n                },\n              ],\n            },\n            stream: stream,\n          });\n\n          myPeer.current = peer;\n\n          peer.on(\"signal\", (data) => {\n            socket.current.emit(\"callUser\", {\n              userToCall: id,\n              signalData: data,\n              from: yourID,\n            });\n          });\n\n          peer.on(\"stream\", (stream: MediaStream) => {\n            if (partnerVideo.current) {\n              partnerVideo.current.srcObject = stream;\n            }\n          });\n\n          peer.on(\"error\", (err) => {\n            endCall();\n          });\n\n          socket.current.on(\"callAccepted\", (signal: string) => {\n            setCallAccepted(true);\n            peer.signal(signal);\n          });\n\n          socket.current.on(\"close\", () => {\n            window.location.reload();\n          });\n\n          socket.current.on(\"rejected\", () => {\n            window.location.reload();\n          });\n        })\n        .catch(() => {\n          toast.error(\n            \"Por favor, verifique se possui (Câmera, Microfone). Certifique-se de dar as devidas permissões de acesso para o navegador.\"\n          );\n        });\n    } else {\n      toast.error(\n        \"Opa, usuário não encontrado, tem certeza que digitou corretamente?\"\n      );\n\n      return;\n    }\n  }\n\n  function acceptCall() {\n    ringtoneSound.unload();\n    navigator.mediaDevices\n      .getUserMedia({ video: true, audio: true })\n      .then((stream) => {\n        setStream(stream);\n        if (userVideo.current) {\n          userVideo.current.srcObject = stream;\n        }\n        setCallAccepted(true);\n        const peer = new Peer({\n          initiator: false,\n          trickle: false,\n          stream: stream,\n        });\n\n        myPeer.current = peer;\n\n        peer.on(\"signal\", (data) => {\n          socket.current.emit(\"acceptCall\", { signal: data, to: caller });\n        });\n\n        peer.on(\"stream\", (stream: MediaStream) => {\n          if (partnerVideo.current !== null) {\n            partnerVideo.current.srcObject = stream;\n          }\n        });\n\n        peer.on(\"error\", (err) => {\n          endCall();\n        });\n\n        peer.signal(callerSignal);\n\n        socket.current.on(\"close\", () => {\n          window.location.reload();\n        });\n      })\n      .catch(() => {\n        toast.error(\n          \"Por favor, verifique se possui (Câmera, Microfone). Certifique-se de dar as devidas permissões de acesso para o navegador.\"\n        );\n      });\n  }\n\n  function rejectCall() {\n    ringtoneSound.unload();\n    setCallRejected(true);\n    socket.current.emit(\"rejected\", { to: caller });\n    window.location.reload();\n  }\n\n  function endCall() {\n    if (myPeer.current !== null && myPeer.current !== undefined) {\n      myPeer.current.destroy();\n      socket.current.emit(\"close\", { to: caller });\n      window.location.reload();\n    }\n  }\n\n  function handleClickMuteAudio() {\n    if (stream) {\n      setAudioMuted(!audioMuted);\n      stream.getAudioTracks()[0].enabled = audioMuted;\n    }\n  }\n  function handleSignout() {\n    signOut();\n  }\n\n  function handleClickMuteVideo() {\n    if (stream) {\n      setVideoMuted(!videoMuted);\n      stream.getVideoTracks()[0].enabled = videoMuted;\n    }\n  }\n\n  function renderMap() {\n    if (!callRejected && !callAccepted && !callingFriend) return \"flex\";\n    return \"none\";\n  }\n\n  function renderCall() {\n    if (!callRejected && !callAccepted && !callingFriend) return \"none\";\n    return \"block\";\n  }\n\n  let UserVideo;\n  if (stream) {\n    UserVideo = (\n      <video className=\"userVideo\" playsInline muted ref={userVideo} autoPlay />\n    );\n  }\n\n  let PartnerVideo;\n  if (callAccepted) {\n    PartnerVideo = (\n      <video className=\"partnerVideo\" playsInline ref={partnerVideo} autoPlay />\n    );\n  }\n\n  let incomingCall;\n  if (receivingCall && !callAccepted && !callRejected) {\n    incomingCall = (\n      <div className=\"incomingCallContainer\">\n        <div className=\"incomingCall\">\n          <div className=\"incomingMessageContainer\">\n            <span className=\"message\"> Compartilhe sua experência com </span>\n            <span className=\"message\">{caller} </span>\n          </div>\n          <div className=\"incomingCallButtons\">\n            <button\n              name=\"accept\"\n              className=\"buttonAccept\"\n              onClick={() => acceptCall()}\n            >\n              Aceitar\n            </button>\n            <button\n              name=\"reject\"\n              className=\"buttonReject\"\n              onClick={() => rejectCall()}\n            >\n              Recusar\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  let audioControl;\n  if (audioMuted) {\n    audioControl = (\n      <span className=\"iconContainer\" onClick={() => handleClickMuteAudio()}>\n        <img src={microphonestop} alt=\"Unmute audio\" />\n      </span>\n    );\n  } else {\n    audioControl = (\n      <span className=\"iconContainer\" onClick={() => handleClickMuteAudio()}>\n        <img src={microphone} alt=\"Mute audio\" />\n      </span>\n    );\n  }\n  let videoControl;\n  if (videoMuted) {\n    videoControl = (\n      <span className=\"iconContainer\" onClick={() => handleClickMuteVideo()}>\n        <img src={camerastop} alt=\"Resume video\" />\n      </span>\n    );\n  } else {\n    videoControl = (\n      <span className=\"iconContainer\" onClick={() => handleClickMuteVideo()}>\n        <img src={camera} alt=\"Stop audio\" />\n      </span>\n    );\n  }\n\n  let hangUp = (\n    <span className=\"iconContainer\" onClick={() => endCall()}>\n      <img src={hangup} alt=\"End call\" />\n    </span>\n  );\n\n  return (\n    <>\n      <div id=\"page-map\" style={{ display: renderMap() }}>\n        <aside>\n          <header>\n            <>\n              <img src={mapMarkerImg} alt=\"Happy\" />\n              <>\n                <span>Olá, seja bem vindo </span>\n                <span>{user ? user.name : \"!\"} :)</span>\n              </>\n              <button onClick={handleSignout}>Sair</button>\n            </>\n            <h2>Escolha um orfanato no mapa</h2>\n            <p>Muitas crianças estão esperando a sua visita :)</p>\n          </header>\n          <footer>\n            <h3>Compartilhe sua visita com um amigo.</h3>\n            <div className=\"usernameActionText\">\n              Para quem deseja ligar,{\" \"}\n              <span className=\"username highlight\">{yourID}</span> ?\n            </div>\n            <input\n              type=\"text\"\n              placeholder=\"ID do parceiro\"\n              value={receiverID}\n              onChange={(e) => setReceiverID(e.target.value)}\n            />\n            <button onClick={() => callPeer(receiverID.toLowerCase().trim())}>\n              Ligar\n            </button>\n          </footer>\n        </aside>\n\n        <MapContainer\n          center={[-22.2810255, -42.5335925]}\n          zoom={15}\n          style={{ width: \"100%\", height: \"100%\" }}\n        >\n          <TileLayer\n            url={`https://api.mapbox.com/styles/v1/mapbox/streets-v11/tiles/256/{z}/{x}/{y}@2x?access_token=${process.env.REACT_APP_MAPBOX_TOKEN}`}\n          />\n\n          {orphanages.map((orphanage) => {\n            return (\n              <Marker\n                key={orphanage.id}\n                icon={happyMapIcon}\n                position={[orphanage.latitude, orphanage.longitude]}\n              >\n                <Popup\n                  closeButton={false}\n                  minWidth={240}\n                  maxWidth={240}\n                  className=\"map-popup\"\n                >\n                  {orphanage.name}\n                  <Link to={`orphanages/${orphanage.id}`}>\n                    <FiArrowRight size={25} color=\"#FFF\" />\n                  </Link>\n                </Popup>\n              </Marker>\n            );\n          })}\n        </MapContainer>\n\n        <Link to=\"/orphanages/create\" className=\"create-orphanage\">\n          <FiPlus size={32} color=\"#FFF\" />\n        </Link>\n      </div>\n\n      <div>{incomingCall}</div>\n      <div className=\"callContainer\" style={{ display: renderCall() }}>\n        <LogoHappy />\n        <div className=\"partnerVideoContainer\">{PartnerVideo}</div>\n        <div className=\"userVideoContainer\">{UserVideo}</div>\n        <div className=\"controlsContainer\">\n          {audioControl}\n          {videoControl}\n          {hangUp}\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default OrphanagesMap;\n","import React from 'react';\n\nimport mapMarkerImg from '../images/map-marker.svg';\nimport { FiArrowLeft } from \"react-icons/fi\";\n\nimport '../styles/components/sidebar.css';\nimport { useHistory } from 'react-router-dom';\n\nexport default function Sidebar() {\n  const { goBack } = useHistory();\n  return (\n    <aside className=\"app-sidebar\">\n        <img src={mapMarkerImg} alt=\"Happy\" />\n\n        <footer>\n          <button type=\"button\" onClick={goBack}>\n            <FiArrowLeft size={24} color=\"#FFF\" />\n          </button>\n        </footer>\n      </aside>\n  )\n}","import { useEffect, useState } from \"react\";\n//import { FaWhatsapp } from \"react-icons/fa\";\nimport { FiClock, FiInfo } from \"react-icons/fi\";\nimport { MapContainer, Marker, TileLayer } from \"react-leaflet\";\nimport { useParams } from \"react-router-dom\";\n\nimport \"../styles/pages/orphanage.css\";\nimport Sidebar from \"../components/Sidebar\";\nimport happyMapIcon from \"../utils/mapicon\";\nimport api from \"../services/api\";\n\ninterface Orphanage {\n  latitude: number;\n  longitude: number;\n  name: string;\n  about: string;\n  instructions: string;\n  opening_hours: string;\n  open_on_weekends: string;\n  images: {\n    id: number;\n    url: string;\n  }[];\n}\ninterface OrphanageParams {\n  id: string;\n}\n\nexport default function Orphanage() {\n  const params = useParams<OrphanageParams>();\n  const [orphanage, setOrphanage] = useState<Orphanage>();\n\n  const [activeImageIndex, setActiveImageIndex] = useState(0);\n\n  useEffect(() => {\n    api.get(`orphanages/${params.id}`).then((response) => {\n      setOrphanage(response.data);\n    });\n  }, [params.id]);\n\n  if (!orphanage) {\n    return <p>Por favor, aguarde.</p>;\n  }\n\n  return (\n    <div id=\"page-orphanage\">\n      <Sidebar />\n\n      <main>\n        <div className=\"orphanage-details\">\n          <img\n            src={orphanage.images[activeImageIndex].url}\n            alt={orphanage.name}\n          />\n\n          <div className=\"images\">\n            {orphanage.images.map((image, index) => {\n              return (\n                <button\n                  key={image.id}\n                  className={activeImageIndex === index ? \"active\" : \"\"}\n                  type=\"button\"\n                  onClick={() => {\n                    setActiveImageIndex(index);\n                  }}\n                >\n                  <img src={image.url} alt={orphanage.name} />\n                </button>\n              );\n            })}\n          </div>\n\n          <div className=\"orphanage-details-content\">\n            <h1>{orphanage.name}</h1>\n            <p>{orphanage.about}</p>\n\n            <div className=\"map-container\">\n              <MapContainer\n                center={[orphanage.latitude, orphanage.longitude]}\n                zoom={16}\n                style={{ width: \"100%\", height: 280 }}\n                dragging={false}\n                touchZoom={false}\n                zoomControl={false}\n                scrollWheelZoom={false}\n                doubleClickZoom={false}\n              >\n                <TileLayer\n                  url={`https://api.mapbox.com/styles/v1/mapbox/streets-v11/tiles/256/{z}/{x}/{y}@2x?access_token=${process.env.REACT_APP_MAPBOX_TOKEN}`}\n                />\n                <Marker\n                  interactive={false}\n                  icon={happyMapIcon}\n                  position={[orphanage.latitude, orphanage.longitude]}\n                />\n              </MapContainer>\n\n              <footer>\n                <a\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  href={`https://www.google.com/maps/dir/?api=1&destination=${orphanage.latitude},${orphanage.longitude}`}\n                >\n                  Ver rotas no Google Maps\n                </a>\n              </footer>\n            </div>\n\n            <hr />\n\n            <h2>Instruções para visita</h2>\n            <p>{orphanage.instructions}</p>\n\n            <div className=\"open-details\">\n              <div className=\"hour\">\n                <FiClock size={32} color=\"#15B6D6\" />\n                Segunda à Sexta <br />\n                {orphanage.opening_hours}\n              </div>\n              {orphanage.open_on_weekends ? (\n                <div className=\"open-on-weekends\">\n                  <FiInfo size={32} color=\"#39CC83\" />\n                  Atendemos <br />\n                  fim de semana\n                </div>\n              ) : (\n                <div className=\"open-on-weekends dont-open\">\n                  <FiInfo size={32} color=\"#FF669d\" />\n                  Não atendemos <br />\n                  nofim de semana\n                </div>\n              )}\n            </div>\n\n            {/* <button type=\"button\" className=\"contact-button\">\n              <FaWhatsapp size={20} color=\"#FFF\" />\n              Entrar em contato\n            </button> */}\n          </div>\n        </div>\n      </main>\n    </div>\n  );\n}\n","import { ChangeEvent, FormEvent, useState } from \"react\";\nimport { MapContainer, Marker, TileLayer, useMapEvents } from \"react-leaflet\";\n\nimport { useHistory } from \"react-router-dom\";\nimport api from \"../services/api\";\n\nimport { FiPlus } from \"react-icons/fi\";\n\nimport \"../styles/pages/create-orphanage.css\";\nimport Sidebar from \"../components/Sidebar\";\nimport happyMapIcon from \"../utils/mapicon\";\n\nexport default function CreateOrphanage() {\n  const history = useHistory();\n\n  const [position, setPosition] = useState({ latitude: 0, longitude: 0 });\n\n  const [name, setName] = useState(\"\");\n  const [about, setAbout] = useState(\"\");\n  const [instructions, setInstructions] = useState(\"\");\n  const [opening_hours, setOpeningHours] = useState(\"\");\n  const [open_on_weekend, setOpenOnWeekend] = useState(true);\n  const [images, setImages] = useState<File[]>([]);\n  const [previewImages, setPreviewImages] = useState<string[]>([]);\n\n  function LocationMarker() {\n    const map = useMapEvents({\n      click(event) {\n        const { lat, lng } = event.latlng;\n        setPosition({\n          latitude: lat,\n          longitude: lng,\n        });\n      },\n    });\n\n    return position.latitude !== 0 ? (\n      <Marker\n        interactive={false}\n        icon={happyMapIcon}\n        position={[position.latitude, position.longitude]}\n      />\n    ) : null;\n  }\n\n  function handleSelectImages(event: ChangeEvent<HTMLInputElement>) {\n    if (!event.target.files) {\n      return;\n    }\n    const selectedImages = Array.from(event.target.files);\n\n    setImages(selectedImages);\n\n    const selectedImagesPreview = selectedImages.map((image) => {\n      return URL.createObjectURL(image);\n    });\n\n    setPreviewImages(selectedImagesPreview);\n  }\n\n  async function handleSubmit(event: FormEvent) {\n    event.preventDefault();\n\n    const { latitude, longitude } = position;\n\n    const data = new FormData();\n\n    data.append(\"name\", name);\n    data.append(\"about\", about);\n    data.append(\"latitude\", String(latitude));\n    data.append(\"longitude\", String(longitude));\n    data.append(\"instructions\", instructions);\n    data.append(\"opening_hours\", opening_hours);\n    data.append(\"open_on_weekend\", String(open_on_weekend));\n\n    images.forEach((image) => {\n      data.append(\"images\", image);\n    });\n\n    console.log(data);\n\n    await api.post(\"orphanages\", data);\n\n    history.push(\"/ok\");\n  }\n\n  return (\n    <div id=\"page-create-orphanage\">\n      <Sidebar />\n      <main>\n        <form onSubmit={handleSubmit} className=\"create-orphanage-form\">\n          <fieldset>\n            <legend>Dados</legend>\n\n            <MapContainer\n              center={[-22.2810255, -42.5335925]}\n              style={{ width: \"100%\", height: 280 }}\n              zoom={15}\n              /* onclick={handleMapClick} */\n            >\n              <TileLayer\n                url={`https://api.mapbox.com/styles/v1/mapbox/streets-v11/tiles/256/{z}/{x}/{y}@2x?access_token=${process.env.REACT_APP_MAPBOX_TOKEN}`}\n              />\n              <LocationMarker />\n            </MapContainer>\n\n            <div className=\"input-block\">\n              <label htmlFor=\"name\">Nome</label>\n              <input\n                id=\"name\"\n                value={name}\n                onChange={(event) => setName(event.target.value)}\n              />\n            </div>\n\n            <div className=\"input-block\">\n              <label htmlFor=\"about\">\n                Sobre <span>Máximo de 300 caracteres</span>\n              </label>\n              <textarea\n                id=\"about\"\n                value={about}\n                onChange={(event) => setAbout(event.target.value)}\n                maxLength={300}\n              />\n            </div>\n\n            <div className=\"input-block\">\n              <label htmlFor=\"images\">Fotos</label>\n\n              <div className=\"images-container\">\n                {previewImages.map((image) => {\n                  return <img key={image} src={image} alt={name} />;\n                })}\n                <label htmlFor=\"image[]\" className=\"new-image\">\n                  <FiPlus size={24} color=\"#15b6d6\" />\n                </label>\n              </div>\n              <input\n                multiple\n                onChange={handleSelectImages}\n                type=\"file\"\n                id=\"image[]\"\n              />\n            </div>\n          </fieldset>\n\n          <fieldset>\n            <legend>Visitação</legend>\n\n            <div className=\"input-block\">\n              <label htmlFor=\"instructions\">Instruções</label>\n              <textarea\n                id=\"instructions\"\n                value={instructions}\n                onChange={(event) => setInstructions(event.target.value)}\n              />\n            </div>\n\n            <div className=\"input-block\">\n              <label htmlFor=\"opening_hours\">Horário de funcionamento</label>\n              <input\n                id=\"opening_hours\"\n                value={opening_hours}\n                onChange={(event) => setOpeningHours(event.target.value)}\n              />\n            </div>\n\n            <div className=\"input-block\">\n              <label htmlFor=\"open_on_weekends\">Atende fim de semana</label>\n\n              <div className=\"button-select\">\n                <button\n                  type=\"button\"\n                  className={open_on_weekend ? \"active\" : \"\"}\n                  onClick={() => setOpenOnWeekend(true)}\n                >\n                  {\" \"}\n                  Sim\n                </button>\n\n                <button\n                  type=\"button\"\n                  className={open_on_weekend ? \"\" : \"active\"}\n                  onClick={() => setOpenOnWeekend(false)}\n                >\n                  {\" \"}\n                  Não\n                </button>\n              </div>\n            </div>\n          </fieldset>\n\n          <button className=\"confirm-button\" type=\"submit\">\n            Confirmar\n          </button>\n        </form>\n      </main>\n    </div>\n  );\n}\n","export default __webpack_public_path__ + \"static/media/Image02.49c07ff0.svg\";","import React from 'react';\n\nimport { Link } from 'react-router-dom';\n\nimport '../styles/pages/orphanageCreated.css';\nimport img from '../images/Image02.svg';\n\nconst OrphanageCreated: React.FC = () => {\n  return (\n    <div id=\"page-done\">\n      <div className=\"left\">\n          <h1>Ebaaa!</h1>\n          <p>O cadastro deu certo e foi enviado</p>\n          <p>ao administrador para ser aprovado</p>\n          <p>Agora é só esperar :)</p>\n        <Link to=\"/map\">\n          <button className=\"buttonOK\"> Voltar para o mapa </button>\n        </Link>\n      </div>\n\n      <div className=\"right\">\n        <img src={img} alt=\"Happy\" />\n      </div>\n        \n    </div>\n  );\n};\n\nexport default OrphanageCreated;","import React from 'react';\nimport {Switch, Route, Redirect } from 'react-router-dom';\n\nimport {useAuth} from './contexts/auths';\n\nimport Login from './pages/Login';\nimport Landing from './pages/Landing';\nimport OrphanagesMaps from './pages/OrphanagesMap';\nimport Orphanage from './pages/Orphanage';\nimport CreateOrphanage from './pages/CreateOrphanage';\nimport Orphanagecreated from './pages/OrphanageCreated';\n\n\nfunction CustomRoute({ isPrivate=false, ...rest }) {\n  const { signed }= useAuth();\n\n  if (isPrivate && !signed) {\n    return <Redirect to=\"/login\" />\n  }\n\n  return <Route {...rest} />;\n}\n\nconst Routes: React.FC = () => (\n    <Switch>\n      <CustomRoute path=\"/\" exact component={Landing} />\n      <CustomRoute path=\"/login\" component={Login} /> \n      <CustomRoute isPrivate path=\"/map\" component={OrphanagesMaps} />\n      <CustomRoute isPrivate path=\"/ok\" component={Orphanagecreated} />\n      <CustomRoute isPrivate path=\"/orphanages/create\" component={CreateOrphanage} />\n      <CustomRoute isPrivate path=\"/orphanages/:id\" component={Orphanage} />\n    </Switch>\n);\n\nexport default Routes;","import { createBrowserHistory } from 'history';\n\nexport default createBrowserHistory({\n  forceRefresh: true\n});","import React from 'react';\nimport  GlobalStyle from  '../src/styles/global';\nimport { Router } from 'react-router-dom';\nimport { ToastContainer } from 'react-toastify';\n\nimport  './styles/global.ts';\nimport { AuthProvider } from '../src/contexts/auths';\n\nimport Routes from '../src/routes';\nimport history from './services/history';\n\nfunction App() {\n  return (\n    <AuthProvider>\n      <Router history={history}>\n        <GlobalStyle />\n        <Routes />\n        <ToastContainer autoClose={3000}/>\n      </Router>\n    </AuthProvider>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './App';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}